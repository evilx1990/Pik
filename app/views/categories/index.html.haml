%div.box
  %button.btn.btn-sm.btn-secondary#newCategory
    NEW CATEGORY
  -#=render 'categories/form'
  %div.new-cat
    = form_with model: @category, local: true do |form|
      = form.text_field :name, style: 'float: left; display: block-inline;'
      = form.hidden_field :user_id, value: current_user.id
      = form.submit

%hr

%div.categories
- @categories.each do |category|
  .card
    .card-img-top
      = link_to(image_tag('category.png'), show_category_image_path(category))
    .card-text
      = category.name
      = category.count
      - if current_user.id == category.user_id
        = link_to('edit', edit_category_path(category))
        -#= link_to('delete', category_path(category), method: :delete, data: { confirm: 'You are sure?' })
        %button{ id: category.id}
          %a.delete Destroy
        - if current_user.following?(category)
          = link_to('unfollow', unfollow_category_path(category), method: :put)
        - else
          = link_to('follow', follow_category_path(category), method: :put)