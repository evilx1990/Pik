%hr

.categories
  -@categories.each do |category|
    .card
      .card-img-top
        -unless category.image
          =link_to(image_tag('categoryNew.png', alt: 'new category'), category_path(category))
        -else
          =link_to(image_tag(category.image.picture.thumb_medium.url, alt: 'picture'), category_path(category))
      .card-text.d-flex.justify-content-between
        = truncate(category.name, length: 10)
        &nbsp|&nbsp
        = category.count
        %div
          =link_to(t('categories.card_buttons.show'), category_path(category), class: 'category-nav')
          -if current_user == category.user
            =link_to(t('categories.card_buttons.edit'), edit_category_path(category), class: 'category-nav')
            =link_to(t('categories.card_buttons.delete'), category_path(category), class: 'category-nav',
                     method: :delete, data: { confirm: t('categories.card_buttons.delete') + '?' })
          -if current_user.following?(category)
            =link_to(t('categories.card_buttons.unfollow'), unfollow_category_path(category), class: 'category-nav', remote: true, method: :put)
          -else
            =link_to(t('categories.card_buttons.follow'), follow_category_path(category), class: 'category-nav', remote: true, method: :put)